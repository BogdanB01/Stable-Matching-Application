<div class="table-component-holder mat-elevation-z4">
    <mat-toolbar class="table-header">
        <h1 class="mat-headline center-align">Proiecte propuse</h1>
        <button mat-button type="button" (click)="openStatisticsDialog()">
            <mat-icon> assessment </mat-icon>
            <span> Statistici proiecte </span>
        </button>
    </mat-toolbar>

    <div class="table-container">

        <mat-table #table [dataSource]="dataSource">
          
            <ng-container matColumnDef="title">
            <mat-header-cell *matHeaderCellDef> Titlu </mat-header-cell>
            <mat-cell *matCellDef="let element"> <a routerLink='project-info'> {{element.title}} </a> </mat-cell>
            </ng-container>

            <ng-container matColumnDef="capacity">
            <mat-header-cell *matHeaderCellDef> Numar studenti </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.capacity}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="assignedStudents">
                    <mat-header-cell *matHeaderCellDef> Studenti asignati </mat-header-cell>
                    
                    <mat-cell *matCellDef="let element; let i = index"> 
                        
                        <div *ngIf="!element.assignedProjects.length">
                            None
                        </div> 

                        <mat-chip-list #chipList>
                            <mat-chip *ngFor="let stud of element.assignedProjects; let j = index"
                            [removable]="true" (remove)="unassignStudent(stud.student.id, element.id)">
                                {{stud.student.name}}
                                <mat-icon matChipRemove>cancel</mat-icon>
                            </mat-chip>
                        </mat-chip-list>

                    </mat-cell>
            </ng-container>
    
            <ng-container matColumnDef="actions">
                <mat-header-cell *matHeaderCellDef> Actiuni </mat-header-cell>
               
                <mat-cell *matCellDef="let element; let i = index" fxFlex>
                    <button mat-icon-button>
                        <i class="material-icons" (click)="removeProject(element.id)">delete</i>
                    </button>
                    <button mat-icon-button>
                        <i class="material-icons" (click)="openEditProjectModal(element)">mode_edit</i>
                    </button> 
                    <button mat-icon-button>
                        <i class="material-icons" (click)="openSearchStudentModal(element.id)">person_add</i>
                    </button>
                </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>
    </div>
</div>